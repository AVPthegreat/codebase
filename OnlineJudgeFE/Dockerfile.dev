FROM node:12-bullseye

WORKDIR /app

# Install dependencies first (better layer caching)
COPY package.json package-lock.json* yarn.lock* ./
RUN npm ci || npm install

# Copy the rest of the code
COPY . .

# Expose the port used by webpack dev server
EXPOSE 8080

ENV HOST=0.0.0.0

CMD ["npm", "run", "dev"]
